{"version":3,"file":"base.js","sources":["../../src/components/base.js"],"sourcesContent":["/**\n * Базовый абстрактный класс для всех UI компонентов\n * @abstract\n */\nexport class Base {\n    /**\n     * Map всех экземпляров компонентов (статическое, общее для всех наследников)\n     * @type {Map<Element, Base>}\n     */\n    static instances = new Map();\n\n    /**\n     * Создает экземпляр UI компонента\n     * @param {Element} element - DOM элемент, к которому привязывается компонент\n     * @throws {Error} Если попытаться создать экземпляр Base напрямую\n     */\n    constructor(element) {\n        if (this.constructor === Base) {\n            throw new Error('Base is abstract and cannot be instantiated directly');\n        }\n\n        // Инициализируем instances если его еще нет у наследника\n        if (!this.constructor.instances) {\n            this.constructor.instances = new Map();\n        }\n\n        /**\n         * DOM элемент компонента\n         * @type {Element}\n         */\n        this.element = element;\n\n        // Сохраняем экземпляр\n        this.constructor.instances.set(element, this);\n    }\n\n    /**\n     * Добавляет реактивное свойство к компоненту\n     * @param {string} name - Имя свойства\n     * @param {string} selector - CSS селектор для поиска элемента в DOM этого компонента\n     * @param {string} [propertyType='textContent'] - Тип свойства: \n     *        'textContent' | 'innerHTML' | имя атрибута (например: 'src', 'href', 'data-*')\n     * @returns {this} Возвращает this для цепочки вызовов\n     * @example\n     * // Текстовое свойство\n     * this.addReactiveProperty('title', '.card__title', 'textContent');\n     * // HTML свойство\n     * this.addReactiveProperty('content', '.card__content', 'innerHTML');\n     * // Свойство-атрибут\n     * this.addReactiveProperty('imageSrc', '.card__img', 'src');\n     */\n    addReactiveProperty(name, selector, propertyType = 'textContent') {\n        if (!this.reactive) {\n            this.reactive = {};\n        }\n        // Находим целевой элемент один раз при инициализации\n        const targetElement = !selector || selector === 'this' ?\n            this.element :\n            this.element.querySelector(selector);\n\n        if (!targetElement) {\n            console.warn(`Element not found for selector: ${selector}`);\n            return this;\n        }\n\n        Object.defineProperty(this.reactive, name, {\n            get: () => {\n                switch (propertyType) {\n                    case 'innerHTML':\n                        return targetElement.innerHTML || '';\n                    case 'textContent':\n                        return targetElement.textContent || '';\n                    default:\n                        return targetElement.getAttribute(propertyType) || '';\n                }\n            },\n            set: (value) => {\n                switch (propertyType) {\n                    case 'innerHTML':\n                        return targetElement.innerHTML = value;\n                    case 'textContent':\n                        return targetElement.textContent = value;\n                    default:\n                        return targetElement.setAttribute(propertyType, value);\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n\n        return this;\n    }\n\n\n    /**\n     * Показывает компонент (убирает display: none)\n     */\n    show() {\n        this.element.style.display = '';\n    }\n\n    /**\n     * Скрывает компонент (устанавливает display: none)\n     */\n    hide() {\n        this.element.style.display = 'none';\n    }\n\n    /**\n     * Включает компонент (убирает атрибут disabled)\n     */\n    enable() {\n        this.element.disabled = false;\n    }\n\n    /**\n     * Отключает компонент (устанавливает атрибут disabled)\n     */\n    disable() {\n        this.element.disabled = true;\n    }\n\n    /**\n     * Получает экземпляр компонента по DOM элементу\n     * @param {Element} element - DOM элемент\n     * @returns {Base|null} Экземпляр компонента или null\n     */\n    static getInstance(element) {\n        return this.instances?.get(element);\n    }\n\n    /**\n     * Получает первый экземпляр компонента по CSS селектору\n     * @param {string} selector - CSS селектор\n     * @returns {Base|null} Экземпляр компонента или null\n     */\n    static getBySelector(selector) {\n        const element = document.querySelector(selector);\n        return element ? this.instances.get(element) : null;\n    }\n\n    /**\n     * Получает все экземпляры компонентов по CSS селектору\n     * @param {string} selector - CSS селектор\n     * @returns {Base[]} Массив экземпляров компонентов\n     */\n    static getAllBySelector(selector) {\n        const elements = document.querySelectorAll(selector);\n        const instances = [];\n\n        elements.forEach(element => {\n            const instance = this.instances.get(element);\n            if (instance) {\n                instances.push(instance);\n            }\n        });\n\n        return instances;\n    }\n\n    /**\n     * Получает все экземпляры компонента\n     * @returns {Base[]} Массив экземпляров\n     */\n    static getAll() {\n        return this.instances ? Array.from(this.instances.values()) : [];\n    }\n\n    /**\n     * Уничтожает компонент, удаляя его из хранилища экземпляров\n     */\n    destroy() {\n        this.constructor.instances?.delete(this.element);\n    }\n\n    /**\n     * Замораживает объект, запрещая добавление новых свойств\n     */\n    freeze() {\n        Object.seal(this);\n        return this;\n    }\n}"],"names":["Base","element","name","selector","propertyType","targetElement","value","elements","instances","instance"],"mappings":"AAIO,MAAMA,CAAK,CAKd,OAAO,UAAY,IAAI,IAOvB,YAAYC,EAAS,CACjB,GAAI,KAAK,cAAgBD,EACrB,MAAM,IAAI,MAAM,sDAAsD,EAIrE,KAAK,YAAY,YAClB,KAAK,YAAY,UAAY,IAAI,KAOrC,KAAK,QAAUC,EAGf,KAAK,YAAY,UAAU,IAAIA,EAAS,IAAI,CAChD,CAiBA,oBAAoBC,EAAMC,EAAUC,EAAe,cAAe,CACzD,KAAK,WACN,KAAK,SAAW,CAAA,GAGpB,MAAMC,EAAgB,CAACF,GAAYA,IAAa,OAC5C,KAAK,QACL,KAAK,QAAQ,cAAcA,CAAQ,EAEvC,OAAKE,GAKL,OAAO,eAAe,KAAK,SAAUH,EAAM,CACvC,IAAK,IAAM,CACP,OAAQE,EAAY,CAChB,IAAK,YACD,OAAOC,EAAc,WAAa,GACtC,IAAK,cACD,OAAOA,EAAc,aAAe,GACxC,QACI,OAAOA,EAAc,aAAaD,CAAY,GAAK,EAC3E,CACY,EACA,IAAME,GAAU,CACZ,OAAQF,EAAY,CAChB,IAAK,YACD,OAAOC,EAAc,UAAYC,EACrC,IAAK,cACD,OAAOD,EAAc,YAAcC,EACvC,QACI,OAAOD,EAAc,aAAaD,EAAcE,CAAK,CAC7E,CACY,EACA,WAAY,GACZ,aAAc,EAC1B,CAAS,EAEM,OA7BH,QAAQ,KAAK,mCAAmCH,CAAQ,EAAE,EACnD,KA6Bf,CAMA,MAAO,CACH,KAAK,QAAQ,MAAM,QAAU,EACjC,CAKA,MAAO,CACH,KAAK,QAAQ,MAAM,QAAU,MACjC,CAKA,QAAS,CACL,KAAK,QAAQ,SAAW,EAC5B,CAKA,SAAU,CACN,KAAK,QAAQ,SAAW,EAC5B,CAOA,OAAO,YAAYF,EAAS,CACxB,OAAO,KAAK,WAAW,IAAIA,CAAO,CACtC,CAOA,OAAO,cAAcE,EAAU,CAC3B,MAAMF,EAAU,SAAS,cAAcE,CAAQ,EAC/C,OAAOF,EAAU,KAAK,UAAU,IAAIA,CAAO,EAAI,IACnD,CAOA,OAAO,iBAAiBE,EAAU,CAC9B,MAAMI,EAAW,SAAS,iBAAiBJ,CAAQ,EAC7CK,EAAY,CAAA,EAElB,OAAAD,EAAS,QAAQN,GAAW,CACxB,MAAMQ,EAAW,KAAK,UAAU,IAAIR,CAAO,EACvCQ,GACAD,EAAU,KAAKC,CAAQ,CAE/B,CAAC,EAEMD,CACX,CAMA,OAAO,QAAS,CACZ,OAAO,KAAK,UAAY,MAAM,KAAK,KAAK,UAAU,OAAM,CAAE,EAAI,CAAA,CAClE,CAKA,SAAU,CACN,KAAK,YAAY,WAAW,OAAO,KAAK,OAAO,CACnD,CAKA,QAAS,CACL,cAAO,KAAK,IAAI,EACT,IACX,CACJ"}